{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/generic-service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"ngx-mask\";\nimport * as i5 from \"../../shared/navbar/navbar.component\";\n\nconst _c0 = function () {\n  return [\"/nuevo\"];\n};\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(genericService, _router) {\n      this.genericService = genericService;\n      this._router = _router;\n      this.pagename = \"Sistema de Solicitudes\";\n      this.componentUrl = \"estudiante/\";\n      this.cedula = \"\";\n      this.password = \"\";\n    }\n\n    ngOnInit() {}\n\n    login() {\n      //Luego de la mascara, el string llegaba sin los dashes (-), aqui se los agregamos.\n      this.cedula = `${this.cedula.substr(0, 3)}-${this.cedula.substr(3, 7)}-${this.cedula.substr(10, 1)}`;\n\n      if (this.password == \"\") {\n        Swal.fire(\"Contraseña incorrecta\", \"Debe introducir una contraseña válida\", \"warning\");\n      } else {\n        var params = {\n          cedula: this.cedula,\n          contrasena: this.password\n        };\n        this.genericService.autenticar(this.componentUrl + \"autenticar\", params, estudiante => {\n          if (estudiante) {\n            localStorage.setItem('matricula', estudiante.matricula);\n            localStorage.setItem('cedula', estudiante.cedula);\n            localStorage.setItem('nivelId', estudiante.nivel.id);\n            localStorage.setItem('institucionId', estudiante.institucion.id);\n\n            this._router.navigate(['/solicitudes']);\n          } else {\n            Swal.fire({\n              title: \"Usuario no encontrado\",\n              text: \"Desea crear un nuevo usuario\",\n              type: \"info\",\n              showCancelButton: true,\n              cancelButtonText: \"No\",\n              confirmButtonText: \"Sí\"\n            }).then(response => {\n              if (response.value) {\n                this._router.navigate(['/nuevo']);\n              }\n            });\n          }\n        });\n      }\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.GenericService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 23,\n    vars: 5,\n    consts: [[3, \"pagename\"], [1, \"container\"], [1, \"row\"], [1, \"card\", \"col\", \"l6\", \"offset-l3\"], [1, \"card-title\", \"center\"], [1, \"card-content\"], [1, \"input-field\"], [\"mask\", \"000-0000000-0\", \"type\", \"text\", \"name\", \"cedula\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"cedula\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [\"for\", \"password\"], [1, \"center\"], [3, \"routerLink\"], [1, \"card-action\"], [1, \"btn\", \"light-blue\", 2, \"width\", \"100%\", 3, \"click\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\");\n        i0.ɵɵtext(6, \"Introduce tu c\\u00E9dula de identidad\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.cedula = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"label\", 8);\n        i0.ɵɵtext(11, \"C\\u00E9dula\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.password = $event;\n        })(\"keyup.enter\", function LoginComponent_Template_input_keyup_enter_13_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"label\", 10);\n        i0.ɵɵtext(15, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\")(17, \"p\", 11)(18, \"a\", 12);\n        i0.ɵɵtext(19, \"Registrarte\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(20, \"div\", 13)(21, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_21_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵtext(22, \"Autenticar\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"pagename\", ctx.pagename);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.cedula);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(4, _c0));\n      }\n    },\n    dependencies: [i2.RouterLinkWithHref, i3.DefaultValueAccessor, i3.NgControlStatus, i3.RequiredValidator, i3.NgModel, i4.MaskDirective, i5.NavbarComponent],\n    styles: [\".container[_ngcontent-%COMP%]{padding-top:40px}h5[_ngcontent-%COMP%]{padding-left:10px;padding-top:15px}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:15px}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}